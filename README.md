# 亚托莉聊天应用

一个支持局域网多人聊天的Web应用，基于Python Flask和WebSocket技术开发。集成了沉浸式体验、媒体播放和AI交互功能。

## 功能特点

1. **用户登录**：输入唯一昵称登录聊天室
2. **实时聊天**：支持多人实时文本聊天
3. **表情发送**：支持快速发送emoji表情
4. **@电影功能**：使用`@电影 URL`格式分享和观看视频
5. **AI助手**：使用`@萝卜子`与AI助手聊天互动
6. **在线用户列表**：实时显示当前在线用户
7. **天气背景融合**：当AI助手提供天气信息时，聊天背景会自动切换为对应的天气主题（晴天、多云、雨天、雪天）
8. **音乐卡片功能**：使用`@音乐`格式分享音乐，支持播放、暂停、停止操作，所有操作实时同步给所有在线用户

## 使用方法

### 启动服务器

```bash
python app.py
```

服务器将在 http://localhost:5000 启动。

### @萝卜子功能使用

在聊天框中输入以`@萝卜子`开头的消息，即可与AI助手互动。例如：

- `@萝卜子 你好！`
- `@萝卜子 你叫什么名字？`
- `@萝卜子 怎么使用电影功能？`
- `@萝卜子 今天天气怎么样？`（询问天气会触发天气背景效果）

AI助手会根据你的问题给出相应的回复。

### @电影功能使用

使用以下格式分享视频：

- `@电影 https://example.com/video.mp4`
- `@电影:https://example.com/video.mp4`

系统会自动解析URL并插入视频播放器。

### 天气背景融合功能

当你向AI助手询问天气信息后，系统会自动根据AI返回的天气类型调整聊天界面背景：

- 晴天：明亮的蓝天背景，带有阳光效果
- 多云：灰蓝色天空背景，带有云朵动画
- 雨天：深蓝色背景，带有雨滴效果
- 雪天：浅蓝色背景，带有雪花飘落效果

天气背景会自动应用于所有在线用户的界面，创造统一的沉浸式聊天体验。

### 音乐卡片功能使用

使用以下格式分享音乐：

- `@音乐 歌曲名称 - 歌手名称`
- `@音乐:歌曲名称 - 歌手名称`

分享后会生成音乐卡片，支持以下操作：

- **播放**：点击播放按钮开始播放音乐
- **暂停**：点击暂停按钮暂停播放
- **停止**：点击停止按钮停止播放并重置进度

所有音乐操作会实时同步给所有在线用户，包括：
- 播放状态（播放/暂停/停止）的同步
- 播放进度的同步
- 系统通知显示谁执行了什么操作

当有用户控制音乐播放时，其他用户会收到系统通知并自动同步音乐的播放状态。

## 配置

服务器列表配置在`config.json`文件中，可以根据需要添加多个服务器地址。